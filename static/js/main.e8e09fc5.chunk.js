(this["webpackJsonpminesweeper-risk"]=this["webpackJsonpminesweeper-risk"]||[]).push([[0],{17:function(t,e,a){},24:function(t,e,a){},25:function(t,e,a){},26:function(t,e,a){},28:function(t,e,a){},29:function(t,e,a){},31:function(t,e,a){"use strict";a.r(e);var n={};a.r(n),a.d(n,"get_row_size",(function(){return T})),a.d(n,"get_col_relative_to_grid",(function(){return Q})),a.d(n,"get_col_size",(function(){return I})),a.d(n,"forward_diagonal",(function(){return K})),a.d(n,"back_diagonal",(function(){return H})),a.d(n,"horizontal",(function(){return F})),a.d(n,"vertical",(function(){return J})),a.d(n,"get_row_type",(function(){return X}));var r=a(1),s=a.n(r),i=a(18),u=a.n(i),c=(a(24),a(25),a(14)),o=a(19),l=a(15),h=a(2),d=a(3),p=a(4),v=a(5),f=(a(26),a(17),0),b=1,m=2,j=2,g=3,k=4,x=0,O=1,y=0,A=1,w=2,C=0,_=1,S=2,q=a(0),M=function(t){Object(p.a)(a,t);var e=Object(v.a)(a);function a(t){var n;return Object(h.a)(this,a),(n=e.call(this,t)).type=t.type,n.row=t.row,n.col=t.col,n}return Object(d.a)(a,[{key:"square_content",value:function(){return this.props.game_state===S&&this.props.status===b&&this.type!==O?"\u274c":this.props.status===b?"\ud83d\udea9":this.props.status>=g?"\ud83d\udca3":this.props.game_state===S&&this.type===O?"\ud83d\udfe0":this.props.game_state===_&&this.type===O?"\ud83d\udfe1":""}},{key:"componentDidUpdate",value:function(){window.twemoji.parse(document.querySelector('.square[data-row="'.concat(this.row,'"][data-col="').concat(this.col,'"]')))}},{key:"render",value:function(){return Object(q.jsxs)("div",{className:"wrapper",children:[Object(q.jsx)("div",{className:"square"+(this.props.status>=m?" revealed":""),"data-row":this.row,"data-col":this.col,onClick:this.props.onClick,children:Object(q.jsx)("span",{children:this.square_content()})}),this.props.clues]})}}]),a}(s.a.Component),N=a(12),E=a.n(N),U=a(16),L=(a(28),function(t){Object(p.a)(a,t);var e=Object(v.a)(a);function a(){return Object(h.a)(this,a),e.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(q.jsxs)("div",{className:"tool"+(this.props.active?" selected":""),onClick:this.props.onClick,children:[Object(q.jsx)("span",{className:"icon",children:this.props.icon}),Object(q.jsx)("span",{className:"count",children:this.props.value})]})}}]),a}(s.a.Component)),B=function(t){Object(p.a)(a,t);var e=Object(v.a)(a);function a(){return Object(h.a)(this,a),e.apply(this,arguments)}return Object(d.a)(a,[{key:"componentDidMount",value:function(){window.twemoji.parse(document.querySelector(".toolbox"))}},{key:"render",value:function(){return Object(q.jsx)("div",{className:"toolbox",children:this.props.tools.map((function(t){return Object(r.createElement)(L,Object(U.a)(Object(U.a)({},t),{},{key:t.type}))}))})}}]),a}(s.a.Component),Z=a(8),P=(a(29),function(t){Object(p.a)(a,t);var e=Object(v.a)(a);function a(t){var n;return Object(h.a)(this,a),(n=e.call(this,t)).arrow=a.ARROWS[t.dir],n.value=n.props.value,n.set_percentage_value(),n.handleMouseOver=n.handleMouseOver.bind(Object(Z.a)(n)),n.handleMouseLeave=n.handleMouseLeave.bind(Object(Z.a)(n)),n}return Object(d.a)(a,[{key:"set_percentage_value",value:function(){this.percent=this.as_percentage(this.props.value,this.props.total)}},{key:"as_percentage",value:function(t,e){return(0===e?0:Number((t/e*100).toFixed(1)))+"%"}},{key:"handleMouseOver",value:function(t){t.target.textContent=this.percent}},{key:"handleMouseLeave",value:function(t){t.target.textContent=this.value}},{key:"componentDidUpdate",value:function(t){t.total!==this.props.total&&this.set_percentage_value()}},{key:"render",value:function(){return Object(q.jsxs)("div",{className:"clue "+this.props.dir,children:[Object(q.jsx)("span",{className:"clue__value",onMouseEnter:this.handleMouseOver,onMouseLeave:this.handleMouseLeave,children:this.value}),Object(q.jsx)("span",{className:"clue__direction",children:this.arrow})]})}}]),a}(s.a.Component));P.ARROWS={N:"\u2191",NE:"\u2197",E:"\u2192",SE:"\u2198",S:"\u2193",SW:"\u2199",W:"\u2190",NW:"\u2196"};var W=P,R=a(6),Y=a.n(R),G=Y.a.mark(K),D=Y.a.mark(H),V=Y.a.mark(F),z=Y.a.mark(J);function T(t,e){return e>=t?4*t-2*e-3:2*e+1}function Q(t,e,a){return(e>=t?e-t+1:t-1-e)+a}function I(t,e,a){return T(t,Q(t,e,a))}function K(t,e,a,n){var r,s,i,u,c,o;return Y.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(r=(t.length-1)/2+1,s=Q(r,e,a),0!==a){l.next=12;break}i=e,u=s;case 4:if(!(i>e-r)){l.next=10;break}return l.next=7,[i,n[i][u]];case 7:i--,u++,l.next=4;break;case 10:l.next=19;break;case 12:c=e,o=s;case 13:if(!(c<e+r)){l.next=19;break}return l.next=16,[c,n[c][o]];case 16:c++,o--,l.next=13;break;case 19:case"end":return l.stop()}}),G)}function H(t,e,a,n){var r,s,i,u,c,o;return Y.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(r=(t.length-1)/2+1,s=Q(r,e,a),!(e>=r-1)){l.next=12;break}i=e,u=s;case 4:if(!(i>e-r)){l.next=10;break}return l.next=7,[i,n[i][u]];case 7:i--,u--,l.next=4;break;case 10:l.next=19;break;case 12:c=e,o=s;case 13:if(!(c<e+r)){l.next=19;break}return l.next=16,[c,n[c][o]];case 16:c++,o++,l.next=13;break;case 19:case"end":return l.stop()}}),D)}function F(t,e){var a;return Y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=0;case 1:if(!(a<t[e].length)){n.next=7;break}return n.next=4,[e,a];case 4:a++,n.next=1;break;case 7:case"end":return n.stop()}}),V)}function J(t,e,a,n){var r,s,i,u,c,o,l;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=Q(n,e,a),s=T(n,r),i=Math.abs(n-1-r),u=r>=n?T(n,i)-1:0,c=i,o=u,l=0;case 5:if(!(l<s)){t.next=12;break}return t.next=8,[c,o];case 8:c>=n-1?o--:o++;case 9:l++,c++,t.next=5;break;case 12:case"end":return t.stop()}}),z)}function X(t){switch(t){case"SE":case"NW":return"back_diagonal";case"NE":case"SW":return"forward_diagonal";case"N":case"S":return"vertical";default:return"horizontal"}}var $=function(t){Object(p.a)(a,t);var e=Object(v.a)(a);function a(){return Object(h.a)(this,a),e.apply(this,arguments)}return Object(d.a)(a,[{key:"refreshPage",value:function(){window.location.reload()}},{key:"render",value:function(){return Object(q.jsxs)("div",{style:{textAlign:"center"},children:[this.props.result,Object(q.jsx)("br",{}),Object(q.jsx)("button",{onClick:this.refreshPage,children:"Retry?"})]})}}]),a}(s.a.Component);var tt=function(t){Object(p.a)(a,t);var e=Object(v.a)(a);function a(t){var n;Object(h.a)(this,a),n=e.call(this,t);var r=t.size||4;n.size=r;var s=2*r-1,i=t.bomb_density||.3,u=Math.pow(r,2)+Math.pow(r-1,2);n.total_fields=u;var c=t.digs||2;return n.state={squares:Array(s).fill(null).map((function(t,e){return Array(T(r,e)).fill(null).map((function(t){return{type:Math.random()<i?O:x,status:f}}))})),current_game_status:C,tool:y,remaining:{}},n.state.remaining[w]=c,n.state.remaining[A]=n.state.squares.flat().filter((function(t){return t.type===O})).length,n.state.remaining[y]=u-n.state.remaining[A],n.grid_col_to_square_col=function(t){for(var e={},a=2*t-1,n=0;n<a;n++){var r=T(t,n);e[n]={};for(var s=0;s<r;s++)e[n][Q(t,n,s)]=s}return e}(r),n}return Object(d.a)(a,[{key:"updateGameStatus",value:function(t,e){if(e.status===t.status)return!1;var a=this.state.remaining;return this.state.tool===w&&a[w]--,e.status===m&&a[y]--,this.setState({remaining:a}),t.status===b&&e.status===f?a[A]++:(t.status===f&&e.status===b||e.status>=g)&&a[A]--,this.setState({remaining:a}),e.status===k?S:0===a[y]?_:C}},{key:"componentDidMount",value:function(){var t=this;document.addEventListener("contextmenu",(function(e){if(e.target.closest(".square")){e.preventDefault();var a=e.target.closest(".square").dataset;t.handleSquareClick(parseInt(a.row),parseInt(a.col),!0)}}),!0),document.addEventListener("auxclick",(function(e){var a=e.target.closest(".clue");if(a&&2===e.which){e.preventDefault();var n=a.parentElement.querySelector(".square").dataset;t.handleClueClick(parseInt(n.row),parseInt(n.col),Object(o.a)(Array,Object(l.a)(a.classList)).find((function(t){return t.length<=2})))}}),!0)}},{key:"handleSquareClick",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.state.current_game_status!==C)return!1;var n=this.state.tool===w;if(this.state.tool!==w&&a&&this.setState({tool:A}),this.state.tool!==A&&this.state.squares[t][e].status===b)return!1;this.updateSquare(t,e),this.state.tool===A&&this.setState({tool:n?w:y})}},{key:"updateSquare",value:function(t,e){var a=E()(this.state.squares),n=a[t][e],r=E()(n);r.status=function(t,e,a){if(t.status>=m)return t.status;switch(e){case A:return t.status===b?f:a[A]>0?b:t.status;case w:return a[w]>0?m+t.type:t.status;default:return t.type===x?j:k}}(n,this.state.tool,this.state.remaining);var s=this.updateGameStatus(n,r);!1!==s&&(a[t][e]=r,this.setState({squares:a,current_game_status:s}))}},{key:"toggleShovel",value:function(){this.setState({tool:this.state.tool===w?y:w})}},{key:"getCountBombGenerator",value:function(t,e,a){var r,s=X(a);return"vertical"===s?r=this.size:"back_diagonal"!==s&&"forward_diagonal"!==s||(r=this.grid_col_to_square_col),n[s](this.state.squares,t,e,r)}},{key:"handleClueClick",value:function(t,e,a){var n,r=E()(this.state.squares),s=this.getCountBombGenerator(t,e,a),i=[],u=Object(c.a)(s);try{for(u.s();!(n=u.n()).done;){var o=n.value,h=r[o[0]][o[1]];if(h.type===O&&h.status!==b&&h.status<m)return;h.status===f&&i.push(o)}}catch(j){u.e(j)}finally{u.f()}for(var d=0,p=i;d<p.length;d++){var v=p[d];this.updateSquare.apply(this,Object(l.a)(v))}}},{key:"addClue",value:function(t,e,a,n){var r,s=this.getCountBombGenerator(a,n,e),i=0,u=0,o=Object(c.a)(s);try{for(o.s();!(r=o.n()).done;){var l=r.value,h=this.state.squares[l[0]][l[1]];i+=h.type,u+=h.status===j?0:1}}catch(d){o.e(d)}finally{o.f()}t.push(Object(q.jsx)(W,{dir:e,value:i,total:u},[e,a,n].join("-")))}},{key:"display_clues",value:function(t,e){var a=this.size,n=2*a-1,r=T(a,t),s=I(a,t,e),i=Math.floor(a/2),u=Math.floor(n/2),c=[];return t<i&&0===e?this.addClue(c,"SE",t,e):t>=n-i&&e===r-1&&this.addClue(c,"NW",t,e),t>i&&t<n-i&&0===e?this.addClue(c,"NE",t,e):t<a&&t>=i&&e===r-1&&this.addClue(c,"SW",t,e),s>=Math.max(3,u-n%2)&&(t>i&&0===e&&t!==n-1?this.addClue(c,"N",t,e):t<n-i-1&&e===r-1&&this.addClue(c,"S",t,e)),r>=Math.max(3,u-n%2)&&(t>i+1&&e===r-1&&0!==e?this.addClue(c,"W",t,e):t<n-i-1&&0===e&&this.addClue(c,"E",t,e)),c}},{key:"render",value:function(){var t=this,e=[{type:"shovel",icon:"\u26cf\ufe0f",value:this.state.remaining[w],active:this.state.tool===w,onClick:this.toggleShovel.bind(this)},{type:"flag",icon:"\ud83d\udea9",value:this.state.remaining[A]}],a=this.state.tool===w?"url(".concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAp/sAAKf7ATxDYQ0AAAN2SURBVEhLxVddSFRREJ6Zu7v+rG5/EiiFBkVBEvQD/VFvPUgUFBU9R5RQQT30JsRSL0FlIllJEUEU/UFERPYrEfVQPVUUUulLZkUZ7r26m/eeac7Zg7iWYu5d+mDZuTOzZ+58Z87MWYQxsGPH6WgQ76x2IrGFDLAMgGuBcY6YKhjZQcaULNDJCB3M8EIp9STiznzd2rpzMLvC6PgjMF+BWNcboMP9DdWBonrxqAPEGnEssi45YOYAgDLAQZoR3xHgwdYjyTvWPCrIfht4TSUz3E/xi9+Ka9sV4y0g3IWIc/8SlIHVV1ZwkhDXk+OvYKblTiy2BeLw2PqMiaGMdVDPLznxvL92XZu7EtMqZi1ZSGa+OHeJ8EBe92rcd582NjYOWPM/wwTW9OpMH7uLN7alVmCacxNUkp24niKFlyrL4X0ymfStacIwgTsPQLGm98LPdUtHZhrBABKU2up56kZzc3PGqvOGCVy/v2Gu2VOk2UYrQNnGWUXdsCHxEKpiPVfJ4b3xPQPd1pw3yBwZqV5GqrY6Ax108+S7EvSrbCttYN856h4rrbTmvEFBvLtajkudpB61OkOvznR65IehhBAiCmBTwHhZnZlWnvXKD4QEi2T1Gvusq/fLDPq8rTLS0y6PEi8LHdxxcJXnZs56zSVVVj1hkCy4TLLKlrEcGfmc+uyVXsygU89KPZKONRRcQzpUKLSTdJv5VpZjA50B8SVdvRV7Ux1SbHtY8UdrNgiLdpIOpHtvFsT3Z5Y6H7SIUtaJfe7bAP010oPbh2ceBu26ZVZkRTk/iq6NbA5T9mW6CkG7UM2OkRR+GSyDp0YegULQTnq0aYEpuH4+mUwb7QgUgnb5ncxTmWkEdNvqRkWYtAvV0CHpZgIeHFc7DIt2mdv4XA9xUNF+qxsTYdFOMsyf6JuDUxz1rG5cyJd2or6qN0h8iKODvVY3buRDuxmL+aK3sagmis45BlotC+Zcp4QNGanBHyM1x2mi0LQHLLTz+GkPJWMNCYCp42XzRLgpk2foQqEhM8CX7XhWPql4LW3/bvpGKBlrDK92CfXXanf7Mi2qaWrC6IwlRIxFOyLXufxrgZZDD6yR0NUOUu2cW+2CKCo2t8mCBB6iHfw10o7bpAI8eYm07PU9+ePzyvgYzwJCtcSnpwZ4iYMSKwYvy3b391jT/wDAb/BJBoPMbOU6AAAAAElFTkSuQmCC","), crosshair"):"auto";return Object(q.jsxs)("div",{className:"board",children:[Object(q.jsx)(B,{tools:e}),Object(q.jsx)("div",{className:"grid",style:{cursor:a},children:this.state.squares.map((function(e,a){return Object(q.jsx)("div",{className:"row",children:e.map((function(e,n){return Object(q.jsx)(M,{type:e.type,status:e.status,game_state:t.state.current_game_status,row:a,col:n,clues:t.display_clues(a,n),onClick:t.handleSquareClick.bind(t,a,n,!1)},a+","+n)}))},a)}))}),this.state.current_game_status===S?Object(q.jsx)($,{result:"loss"}):this.state.current_game_status===_?Object(q.jsx)($,{result:"win"}):""]})}}]),a}(s.a.Component);var et=function(){return Object(q.jsx)(tt,{size:"4"})};u.a.render(Object(q.jsx)(s.a.StrictMode,{children:Object(q.jsx)(et,{})}),document.getElementById("game"))}},[[31,1,2]]]);
//# sourceMappingURL=main.e8e09fc5.chunk.js.map